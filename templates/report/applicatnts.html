    {% extends 'report/base.html' %}
    {% block title %}Applicants{% endblock %}
    {% block content %}
    <div>
        <div><h1 style="font-size: 26px; color: orangered; padding: 20px 15px; text-align: center; font-weight: bold;">Applicants Detailed View</h1></div>
            {% if app %}
            <div class="breadcrumbs"><b>Pending Applications:</b></div>
            <hr>
            <div class="results" style="justify-content: center; margin: 25px 10px;">
                <table id="result_list" style="width: 100%;">
                <thead>
                    <tr>
                    <th scope="col" class="action-checkbox-column pl-2">
                    </th>
                    <th scope="col" class="sortable column-loan_id pl-2">
                    <div class="text"><a href="?o=1">Loan ID</a></div>
                    <div class="clear"></div>
                    </th>
                    <th scope="col" class="sortable column-name pl-2">               
                    <div class="text"><a href="?o=2">Full Name</a></div>
                    <div class="clear"></div>
                    </th>
                    <th scope="col" class="sortable column-id_number pl-2">
                    <div class="text"><a href="?o=3">ID number</a></div>
                    <div class="clear"></div>
                    </th>
                    <th scope="col" class="sortable column-phone_number pl-2">
                    <div class="text"><a href="?o=4">Phone Number</a></div>
                    <div class="clear"></div>
                    </th>
                    <th scope="col" class="sortable column-repayment_period_in_months pl-2">
                    <div class="text"><a href="?o=5">Repayment period in months</a></div>
                    <div class="clear"></div>
                    </th>
                    <th scope="col" class="sortable column-income_level pl-2">
                        <div class="text"><a href="?o=6">Income Level</a></div>
                        <div class="clear"></div>
                    </th>
                    <th scope="col" class="sortable column-amount_applied pl-2">
                    <div class="text"><a href="?o=7">Amount Applied</a></div>
                    <div class="clear"></div>
                    </th>
                    <th scope="col" class="sortable column-next_of_kin pl-2"> 
                    <div class="text"><a href="?o=8">Guarantor</a></div>
                    <div class="clear"></div>
                    </th>
                    <th scope="col" class="sortable column-loan_status pl-2"> 
                        <div class="text"><a href="?o=9">Loan status</a></div>
                        <div class="clear"></div>
                    </th>
                    </tr>
                </thead>
                <form action="" method="post">
                    {% csrf_token %}
                <tbody>   
                    {% for apps in app %}   
                    <tr><td class="action-checkbox pl-2"><input onclick="aproval('{{apps.loan_id}}')" type="checkbox" id="_{{apps.loan_id}}')" class="action-select"></td><th class="field-user nowrap pl-2">{{apps.loan_id}}</a></th><td class="field-first_name pl-2">{{apps.first_name}} {{apps.last_name}}</td><td class="field-address pl-2">{{apps.id_number}}</td><td class="field-phone_number pl-2">{{apps.phone_number}}</td><td class="field-repayment_period_in_months pl-2">{{apps.repayment_period_in_months}}</td><td class="field-income_level pl-2">{{apps.income_level}}</td><td class="field-amount_applied pl-2">{{apps.amount_applied}}</td><td class="field-guarantor_id pl-2">{{apps.guarantor_name}}</td><td class="field-loan_status pl-2">{{apps.loan_status}}</td></tr>
                    {% endfor %}
                </tbody>
                </table>
                Action: 
                    <select name="action" id="">
                        <option value="" style="text-align: center;">---------------------</option>
                        <option value="approve">Approved Selected</option>
                        <option value="reject">Reject Selected</option>
                    </select>
                    <button class="button"type="submit">Submit</button>
                    <button class="button" type="reset">Reset</button>
                    <p style="padding: 10px;">
                        <input style="width: 98%; height: 25px;" type="text" name="selected" id="selected">
                    </p>
                </form>
                <p>{{pending_count}} pending applications</p>
                <hr>
            </div>
            {% endif %}
            
            {% if approved %}
            <div class="breadcrumbs"><b>Approved Applications:</b></div>
            <hr>
            <div class="results" style="justify-content: center; margin: 25px 10px;">
                <table id="result_list" class="mb-4" style="width: 100%;">
                    <thead>
                        <tr>
                        <th scope="col" class="action-checkbox-column pl-2">
                        </th>
                        <th scope="col" class="sortable column-loan_id pl-2">
                        <div class="text"><a href="?o=1">Loan ID</a></div>
                        <div class="clear"></div>
                        </th>
                        <th scope="col" class="sortable column-name pl-2">               
                        <div class="text"><a href="?o=2">Full Name</a></div>
                        <div class="clear"></div>
                        </th>
                        <th scope="col" class="sortable column-id_number pl-2">
                        <div class="text"><a href="?o=3">ID number</a></div>
                        <div class="clear"></div>
                        </th>
                        <th scope="col" class="sortable column-phone_number pl-2">
                        <div class="text"><a href="?o=4">Phone Number</a></div>
                        <div class="clear"></div>
                        </th>
                        <th scope="col" class="sortable column-repayment_period_in_months pl-2">
                        <div class="text"><a href="?o=5">Repayment period in months</a></div>
                        <div class="clear"></div>
                        </th>
                        <th scope="col" class="sortable column-income_level pl-2">
                            <div class="text"><a href="?o=6">Income Level</a></div>
                            <div class="clear"></div>
                        </th>
                        <th scope="col" class="sortable column-amount_applied pl-2">
                        <div class="text"><a href="?o=7">Amount Applied</a></div>
                        <div class="clear"></div>
                        </th>
                        <th scope="col" class="sortable column-next_of_kin pl-2"> 
                        <div class="text"><a href="?o=8">Guarantor</a></div>
                        <div class="clear"></div>
                        </th>
                        <th scope="col" class="sortable column-loan_status pl-2"> 
                            <div class="text"><a href="?o=9">Loan status</a></div>
                            <div class="clear"></div>
                        </th>
                        </tr>
                    </thead>
                <form action="{% url 'applicant' %}" method="post">
                    {% csrf_token %}
                <tbody>   
                    {% for apps in approved %}   
                    <tr><td class="action-checkbox pl-2"><input type="checkbox" onclick="disbustal('{{apps.loan_id}}')" class="action-select"></td><th class="field-useir nowrap pl-2">{{apps.loan_id}}</a></th><td class="field-first_name pl-2">{{apps.first_name}} {{apps.last_name}}</td></td><td class="field-address pl-2">{{apps.id_number}}</td><td class="field-phone_number pl-2">{{apps.phone_number}}</td><td class="field-repayment_period_in_months pl-2">{{apps.repayment_period_in_months}}</td><td class="field-income_level pl-2">{{apps.income_level}}</td><td class="field-amount_applied pl-2">{{apps.amount_applied}}</td><td class="field-guarantor_id pl-2">{{apps.guarantor_name}}</td><td class="field-loan_status pl-2">{{apps.loan_status}}</td></tr>
                    {% endfor %}
                </tbody>
                </table>
                <span class="mt-4">
                    <button class="button" type="submit">Disburse</button>
                    <button class="button" type="reset">Reset</button>
                </span>
                <p style="padding: 10px;"><input style="width: 98%; height: 25px;" type="text" name="d_select" id="d_select"></p>
                <p>{{approved_count}} approved applications</p>
                </form>
                <hr>
            </div>
            {% endif %}

            {% if rejected %}
            <div class="breadcrumbs"><b>Rejected Applications:</b></div>
            <hr>
            <div class="results" style="justify-content: center; margin: 10px;">
                <table id="result_list" style="width: 100%;">
                    <thead>
                    <tr>
                        <th scope="col" class="sortable column-loan_id pl-2">
                        <div class="text"><a href="?o=1">Loan ID</a></div>
                        <div class="clear"></div>
                        </th>
                        <th scope="col" class="sortable column-name pl-2">               
                        <div class="text"><a href="?o=2">Full Name</a></div>
                        <div class="clear"></div>
                        </th>
                        <th scope="col" class="sortable column-id_number pl-2">
                        <div class="text"><a href="?o=3">ID number</a></div>
                        <div class="clear"></div>
                        </th>
                        <th scope="col" class="sortable column-phone_number pl-2">
                        <div class="text"><a href="?o=4">Phone Number</a></div>
                        <div class="clear"></div>
                        </th>
                        <th scope="col" class="sortable column-repayment_period_in_months pl-2">
                        <div class="text"><a href="?o=5">Repayment period in months</a></div>
                        <div class="clear"></div>
                        </th>
                        <th scope="col" class="sortable column-income_level pl-2">
                            <div class="text"><a href="?o=6">Income Level</a></div>
                            <div class="clear"></div>
                        </th>
                        <th scope="col" class="sortable column-amount_applied pl-2">
                        <div class="text"><a href="?o=7">Amount Applied</a></div>
                        <div class="clear"></div>
                        </th>
                        <th scope="col" class="sortable column-next_of_kin pl-2"> 
                        <div class="text"><a href="?o=8">Guarantor</a></div>
                        <div class="clear"></div>
                        </th>
                        <th scope="col" class="sortable column-loan_status pl-2"> 
                            <div class="text"><a href="?o=9">Loan status</a></div>
                            <div class="clear"></div>
                        </th>
                    </tr>
                    </thead>
                    <tbody>   
                        {% for apps in rejected %}   
                        <tr><th class="field-user nowrap pl-2">{{apps.loan_id}}</a></th><td class="field-name pl-2">{{apps.first_name}} {{apps.last_name}}</td><td class="field-address pl-2">{{apps.address}}</td><td class="field-phone_number pl-2">{{apps.phone_number}}</td><td class="field-repayment_period_in_months pl-2">{{apps.repayment_period_in_months}}</td><td class="field-income_level pl-2">{{apps.income_level}}</td><td class="field-amount_applied pl-2">{{apps.amount_applied}}</td><td class="field-guarantor_name pl-2">{{apps.guarantor_name}}</td><td class="field-loan_status pl-2">{{apps.loan_status}}</td></tr>
                        {% endfor %}
                    </tbody>
                    </table>
                    <p>{{rejected_count}} rejected applications</p>
                    <hr>
                </div>
                {% endif %}
            {% if disbursed %}
            <div class="breadcrumbs"><b>Disbursed Applications:</b></div>
            <hr>
            <div class="results" style="justify-content: center; margin: 10px;">
                <table id="result_list" style="width: 100%;">
                    <thead>
                    <tr>
                    <th scope="col" class="sortable column-loan_id pl-2">
                    <div class="text"><a href="?o=1">Loan ID</a></div>
                    <div class="clear"></div>
                    </th>
                    <th scope="col" class="sortable column-name pl-2">               
                    <div class="text"><a href="?o=2">Full Name</a></div>
                    <div class="clear"></div>
                    </th>
                    <th scope="col" class="sortable column-repayment_period_in_months pl-2">
                    <div class="text"><a href="?o=5">Repayment period in months</a></div>
                    <div class="clear"></div>
                    </th>
                    <th scope="col" class="sortable column-amount_applied pl-2">
                    <div class="text"><a href="?o=7">Amount Applied</a></div>
                    <div class="clear"></div>
                    </th>
                    <th scope="col" class="sortable column-amount_applied pl-2">
                        <div class="text"><a href="?o=7">Amount Disbursed</a></div>
                        <div class="clear"></div>
                    </th>
                    <th scope="col" class="sortable column-amount_applied pl-2">
                        <div class="text"><a href="?o=7">Expected Intrest</a></div>
                        <div class="clear"></div>
                    </th>
                    <th scope="col" class="sortable column-income_level pl-2">
                        <div class="text"><a href="?o=6">Total Payable</a></div>
                        <div class="clear"></div>
                    </th>
                    <th scope="col" class="sortable column-next_of_kin pl-2"> 
                    <div class="text"><a href="?o=8">Balance</a></div>
                    <div class="clear"></div>
                    </th>
                    <th scope="col" class="sortable column-loan_status pl-2"> 
                        <div class="text"><a href="?o=9">Loan status</a></div>
                        <div class="clear"></div>
                    </th>
                </tr>
                </thead>
                <tbody>   
                    {% for apps in disbursed %}   
                    <tr><th class="field-user nowrap pl-2">{{apps.loan_id}}</a></th><td class="field-name pl-2">{{apps.first_name}} {{apps.last_name}}</td><td class="field-address pl-2">{{apps.repayment_period_in_months}}</td><td class="field-phone_number pl-2">{{apps.amount_applied}}</td><td class="field-repayment_period_in_months pl-2">{{apps.amount_applied}}</td><td class="field-income_level pl-2">{{apps.repayment.intrest}}</td><td class="field-amount_applied pl-2">{{apps.repayment.total_payable}}</td><td class="field-guarantor_name pl-2">{{apps.repayment.balance}}</td><td class="field-loan_status pl-2">{{apps.loan_status}}</td></tr>
                    {% endfor %}
                </tbody>
                </table>
                <p>{{disbursed_count}} disbursed applications</p>
                <hr>
            </div>
            {% endif %}
            {% if closed %}
            <div class="breadcrumbs"><b>Closed Applications:</b></div>
            <hr>
            <div class="results" style="justify-content: center; margin: 10px;">
                <table id="result_list" style="width: 100%;">
                    <thead>
                        <tr>
                        <th scope="col" class="sortable column-loan_id pl-2">
                        <div class="text"><a href="?o=1">Loan ID</a></div>
                        <div class="clear"></div>
                        </th>
                        <th scope="col" class="sortable column-name pl-2">               
                        <div class="text"><a href="?o=2">Full Name</a></div>
                        <div class="clear"></div>
                        </th>
                        <th scope="col" class="sortable column-id_number pl-2">
                        <div class="text"><a href="?o=3">ID number</a></div>
                        <div class="clear"></div>
                        </th>
                        <th scope="col" class="sortable column-phone_number pl-2">
                        <div class="text"><a href="?o=4">Phone Number</a></div>
                        <div class="clear"></div>
                        </th>
                        <th scope="col" class="sortable column-repayment_period_in_months pl-2">
                        <div class="text"><a href="?o=5">Repayment period in months</a></div>
                        <div class="clear"></div>
                        </th>
                        <th scope="col" class="sortable column-income_level pl-2">
                            <div class="text"><a href="?o=6">Income Level</a></div>
                            <div class="clear"></div>
                        </th>
                        <th scope="col" class="sortable column-amount_applied pl-2">
                        <div class="text"><a href="?o=7">Amount Applied</a></div>
                        <div class="clear"></div>
                        </th>
                        <th scope="col" class="sortable column-next_of_kin pl-2"> 
                        <div class="text"><a href="?o=8">Guarantor</a></div>
                        <div class="clear"></div>
                        </th>
                        <th scope="col" class="sortable column-loan_status pl-2"> 
                            <div class="text"><a href="?o=9">Loan status</a></div>
                            <div class="clear"></div>
                        </th>
                    </tr>
                    </thead>
                <tbody>   
                    {% for apps in closed %}   
                    <tr><th class="field-user nowrap pl-2">{{apps.loan_id}}</a></th><td class="field-name pl-2">{{apps.first_name}} {{apps.last_name}}</td><td class="field-address pl-2">{{apps.address}}</td><td class="field-phone_number pl-2">{{apps.phone_number}}</td><td class="field-repayment_period_in_months pl-2">{{apps.repayment_period_in_months}}</td><td class="field-income_level pl-2">{{apps.income_level}}</td><td class="field-amount_applied pl-2">{{apps.amount_applied}}</td><td class="field-guarantor_name pl-2">{{apps.guarantor_name}}</td><td class="field-loan_status pl-2">{{apps.loan_status}}</td></tr>
                    {% endfor %}
                </tbody>
                </table>
                <p>{{closed_count}} closed applications</p>
                <hr>
            </div>
            {% endif %}
        </div>
            
        <hr style="margin-top: 30px;">
        <p class="text-white">{{pending_count}} pending applications | {{approved_count}} approved applications | {{rejected_count}} rejected applications | {{disbursed_count}} disbursed applications | {{closed_count}} closed applications</p>
        <hr>
    </div>

    <div id="container">
        <h5 style="color: white; font-size: 16px; text-align: center;">Copyright Uwezo Sacco Limited 2021 | Reports</h5>
    </div>
{% endblock content %}

